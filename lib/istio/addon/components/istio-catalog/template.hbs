<section class="header clearfix">
  <h1 class="pull-left">
    {{t "clusterIstioPage.header"}}
  </h1>
  {{#if enabled}}
    <div class="pull-right">
      {{#if confirmDisable}}
        <button class="btn bg-error" {{action "disable"}}>
          <i class="icon icon-alert"></i> {{t "clusterIstioPage.confirmDisable"}}
        </button>
      {{else}}
        <button class="btn bg-error" {{action "promptDisable"}}>
          <i class="icon icon-umbrella"></i> {{t "clusterIstioPage.disable"}}
        </button>
      {{/if}}
    </div>
  {{/if}}
</section>

{{#if (and enabled ready)}}
  {{#banner-message color="bg-info"}}
    <p>{{t "clusterIstioPage.enabled"}}</p>
  {{/banner-message}}
{{else if enabled}}
  {{#banner-message color="bg-warning"}}
    <p>{{t "clusterIstioPage.notReady"}}</p>
  {{/banner-message}}
{{else}}
  {{#banner-message color="bg-warning"}}
    <p>{{t "clusterIstioPage.disabled"}}</p>
  {{/banner-message}}
{{/if}}

{{#if (and enabled ready)}}
  {{#accordion-list showExpandAll=false as |al expandFn|}}
    {{#accordion-list-item
        classNames="mt-30"
        expand=(action expandFn)
        expandAll=al.expandAll
        expandOnInit=true
        expanded=true
        title=(t "clusterIstioPage.links.title")
        detail=(t "clusterIstioPage.links.detail")
    }}
      <div>
        <div class="acc-label p-0 mb-5 mt-10">
          {{t "clusterIstioPage.links.kiali.label"}}:
        </div>
        {{t "clusterIstioPage.links.kiali.url" clusterId=cluster.id htmlSafe=true}}
      </div>
      <div>
        <div class="acc-label p-0 mb-5 mt-10">
          {{t "clusterIstioPage.links.jaeger.label"}}:
        </div>
        {{t "clusterIstioPage.links.jaeger.url" clusterId=cluster.id htmlSafe=true}}
      </div>
      <div>
        <div class="acc-label p-0 mb-5 mt-10">
          {{t "clusterIstioPage.links.grafana.label"}}:
        </div>
        {{t "clusterIstioPage.links.grafana.url" clusterId=cluster.id htmlSafe=true}}
      </div>
      <div>
        <div class="acc-label p-0 mb-5 mt-10">
          {{t "clusterIstioPage.links.prometheus.label"}}:
        </div>
        {{t "clusterIstioPage.links.prometheus.url" clusterId=cluster.id htmlSafe=true}}
      </div>
    {{/accordion-list-item}}
  {{/accordion-list}}
{{/if}}

{{#accordion-list showExpandAll=false  as |al expandFn|}}
  {{#accordion-list-item
      classNames="mt-30"
      expand=(action expandFn)
      expandAll=al.expandAll
      expandOnInit=true
      expanded=true
      showExpand=false
      title=(t "clusterIstioPage.setting.title")
      detail=(t "clusterIstioPage.setting.detail")
  }}
    {{form-key-value
      initialMap=customAnswers
      changed=(action (mut customAnswers))
      allowEmptyValue=true
      addInitialEmptyRow=true
      editing=true
      header=(t "newCatalog.answers.label")
      addActionLabel="newCatalog.answers.addAction"
      keyLabel="newContainer.environment.keyLabel"
      keyPlaceholder="newContainer.environment.keyPlaceholder"
      valueLabel="newContainer.environment.valueLabel"
      valuePlaceholder="newContainer.environment.valuePlaceholder"
    }}
  {{/accordion-list-item}}
{{/accordion-list}}

{{save-cancel
  editing=enabled
  createLabel="clusterIstioPage.enableActionLabel"
  save=(action "save")
  cancel=cancel
}}