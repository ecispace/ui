<nav class="clearfix {{if hideMenu "hide-menu"}} {{if sidebar 'sidebar'}}" role="navigation">
  <ul class="nav-sidebar nav-list no-inline-space">
    {{#each navTree as |item|}}
      {{#if item.submenu.length}}
        {{#if (or (not item.resource) (rbac-allows resource=item.resource scope=item.resourceScope))}}
            <li>
              <a role="button" {{action 'toogleExpand' item}}>
                <i class="{{item.icon}}"/> {{maybe-t item.localizedLabel item.label}}
                <div class="pull-right">
                  <span class="icon icon-chevron-down"/>
                </div>
              </a>
            </li>
        {{/if}}

        <ul class="{{unless item.expanded 'hide'}} submenu">
          {{#each item.submenu as |subitem|}}
            {{#if subitem.route}}
              {{#if (or (not subitem.resource) (rbac-allows resource=subitem.resource scope=subitem.resourceScope))}}
                <li>
                  {{#link-to-as-attrs
                      subitem.route
                      models=subitem.ctx
                      qp=subitem.qp
                      activeParent="LI"
                  }}
                    <i class="{{subitem.icon}}"/> {{maybe-t subitem.localizedLabel subitem.label}}
                  {{/link-to-as-attrs}}
                </li>
              {{/if}}
            {{/if}}
          {{/each}}
        </ul>
      {{else if item.route}}
        {{#if (or (not item.resource) (rbac-allows resource=item.resource scope=item.resourceScope))}}
          <li class="nav-item">
            {{#link-to-as-attrs
              item.route
              models=item.ctx
              qp=item.qp
              activeParent="LI"
              currentWhen=item.currentWhen
              class="nav-link"
            }}
              <i class="{{item.icon}}"/> {{maybe-t item.localizedLabel item.label}}
            {{/link-to-as-attrs}}
          </li>
        {{/if}}
      {{/if}}
    {{/each}}
    <li class="nav-item bottom-item">
      <a href="#" class="btn bg-transparent" {{action "showAbout"}} aria-label="About Rancher">{{if settings.rancherVersion settings.rancherVersion (t 'pageFooter.notARelease')}}</a>
    </li>
  </ul>
</nav>
